<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Building Rust based R Packages – Rust for R Developers</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../building-rust-based-r-pkgs/ffi.html" rel="next">
<link href="../intro-to-rust-for-r-devs/options.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-de84f8d6bb715db06a919283c2d1e787.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-f868c3b369b738ce9afd17f71ee17ec3.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../building-rust-based-r-pkgs/index.html">Building Rust based R Packages</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Rust for R Developers</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/JosiahParry/2025-cascadia-rust-for-r-devs/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Get set up</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../intro-to-rust-for-r-devs/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro to Rust for R Developers</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/why-rust.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Why Rust?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/hello-world.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Hello, World!</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Basic Types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/fizz-buzz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Control Flow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/collections.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Arrays and Vectors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/for-loops.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title"><code>for</code>-loops</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/mutability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Mutability</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/mutable-vectors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Mutable Vectors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/is-odd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/references-slices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Ownership</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/iterators.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Iterators</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/iter-map.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Mapping over Iterators</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/structs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Defining Struct(ure)s</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/struct-methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Struct Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/enums.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Enum(eration)s</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro-to-rust-for-r-devs/options.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title"><code>Some()</code> or <code>None</code>?</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../building-rust-based-r-pkgs/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Building Rust based R Packages</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/ffi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Foreign Function Interfaces (FFI)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/extendr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">What is extendr?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/objective.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Workshop Scope</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/hello-world.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Hello, world!</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/extendr-structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Package structure</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/extendr-dx.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Developer Experience</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/rust-deps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Adding dependencies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/first-fn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Your first function</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/encode.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Encoding a geohash</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/throwing-errors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Throwing errors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/vectorize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Vectorizing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/r-type-system.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">R’s Type System</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/using-extendr-types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Collecting extendr types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/error-handling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Handling Errors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/na-handling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Handle NAs gracefully</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/enums.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Translating Enums</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/geohash-nb.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Geohash Neighbor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/vectorize-neighbor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Vectorize <code>gh_neighbor()</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/decode.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Decode a geohash</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/vectorize-decode.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Vectorize <code>decode()</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../building-rust-based-r-pkgs/vibe-check.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Vibe check</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Building Rust based R Packages</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!--
## Objective {.unnumbered}


- Learn how to create Rust based R packages using extendr
- Begin to feel comfortable working with data between R & Rust
- Create an R package to perform geohashing based on the Rust crate called `geohash`

In this workshop we will create a Rust-based R package to perform [geohashing](https://www.youtube.com/watch?v=vGKs-c1nQYU) using [`extendr`](https://extendr.github.io/).

The first few sections of the workshop may be a litte "lesson" intensive and the latter portion light on it.

## General Overview

- What is FFI
- What is extendr
  - webR support
- R's C API
- `extendr-ffi` & `extendr-api`

## What is a geohash?

- not everyone is a geospatial nerd but i am
- i have 2 videos on this exact concept
- a third video that goes through making this package that inspired this workshop
- Super quick review of what a geohash is

## Hello, World!

- Creating a new package `usethis::create_package(rstudio = FALSE)`
- Add extendr `rextendr::use_extendr()`
- package structure
  - previous workshop used a binary crate, we will be building a library crate
- `rextendr::document()`
- `devtools::load_all()`
- `hello_world()`
- review the contents
- `#[extendr]` attribute macro
- `rprintln!()`

## rextendr DX

- show the VS Code settings
- running `cargo check`

## Adding dependencies

- add geohash dependency
- `rextendr::use_crate()`
- import structs and functions
- import  `Coord` and `encode()`

## A new R function

- create a basic function `gh_encode()` that takes an `x: f64` and a `y: f64` value and prints the coordinate
- next exercise add 3rd argument for length which is `[1:12]` it's `usize`

## Throwing R errors

- let's add validation with `throw_r_error()`
- check that the goehash length is appropriate range
- if not, throw and error

## Calling Rust From R

- add `#[extendr]` macro to the function
  - this does magic behind the hood to make it _callable_ from R
- the function _must_ be added to `extendr_module! {}` for it to be available
- run `rextendr::document()` for the new changes to take place
- `devtools::load_all()` to make the function available

## Encoding a geohash

- lets finish up our first function which will geohash a single coordinate by calling `encode()`
- `encode()` returns a `Result<String>`
- a `Result<>` is a special type of `Option<>`
- we will talk about handling errors gracefully in R later when we cover NA handling
- for now we will `.unwrap()` the result right away
- add the return type as `String`
  - extendr will handle converting this into a character vector

## Vectorize geohash encoding

- modify `gh_encode()` to take a `Vec<f64>` for both `x` and `y`
- We will iterate through these _together_
- review `.zip()` to merge iterators
- for each element in the iterator we encode the geohash
- collect to strings
- rextendr::document()
- devtools::load_all()

test in R

```r
x <- rnorm(100, -180, 180)
y <- rnorm(100, -90, 90)
gh_len <- 7

gh_encode(x, y, gh_len)
```

- What about handling errors and NAs?
- Gonna need to address type mapping first

## Type Mapping

- vecs are fine for basic stuff.
- R types are more complex and have support for NULL and NA values
- Scalar types
- Vector types
- NULL in R
- Robj
- Rust has the unit type `()`. We can tu

## R's type system

- Everything is an SEXP
- Briefly discuss representations
- I thought really hard on whether or not to discuss this. Initially i thought i wouldnt, but i think it is actually really helpful to understand the fundamental data structures in R. It helps make the mental leaps much easier.
- So we're going to spend a few minutes discussing internal representations in R

## Robj  & SEXP

- in extendr, everything can be represented as an Robj
- Robj is an opaque type: we do not know what type it is, we just know its an Robj
- a helpful catch-all
- we can turn any extendr type into an `Robj` using the `.into_robj()` method


## Scalars

- NA aware types that correspond to R's type system
- every scalar has `na()` method

### Doubles

- internally represented by f64
- access the inner f64 value using `.inner()`
- Convert `f64` to an `Rfloat` using `Rfloat::from(x)`


## Strings

- A bit of a nightmare
- Create `Rstr` from a `String` in Rust using `Rstr::from(x)`

## Using extendr types

- rewrite `gh_encode()` to use `Doubles` and `Strings`
- we can leave length as usize for now as it will always be scalar.
- to access the inner value of an `Rfloat` use `.inner()`
-

## Error handling in Rust

> "And I think Result can be explained fairly quickly in the following way: Rust does not have exceptions. Errors are data. If a function is falliable, it returns Result, which is a fork between the successful value, and the error-as-data. We may ignore the error-branch entirely with .unwrap." -Mossa

- Handle errors gracefully on the R side by returning a NULL or NA value when it is appropriate
- describe `Result<>` which is an enum.
- let's match on the result from `encode()`
  - when `Ok(gh)` use `Rstr::from(gh)`
  - when `Err(e)` use `Rstr::na()` to record a missing value
- when we try to encode data that is not in long lat we will get an error—e.g. if its in meter that wont work
- for the exercise feed some bad data to the function to see it return an NA

## NA handling

- now what about when the coordinates are NA?
- how do we handle that?
- we can check `Rfloat::is_na()`
  - if either `Rfloat::is_na()` return `Rstr::na()`
  - else, do the geohash
- test with NA values

## Geohash Neighbor

- A geohash is a square grid
- each location has up to 6 neighbors
- to find a specific neighbor we can use the `neighbor()` function
- this function takes an enum for direction

## Enums in R

- first step, lets make a utility function to take a `String` and convert this to the enum

```r
gh_neighbor <- function(gh, neighbor = c("N","NE","E","SE","S","SW","W","NW")) {
  arg.match(neighbor)
  # function body
}
```

## Custom Enum handling

- match statements can be used on strings too
- there will be a catch all part of the match
- in the function

```rust
fn as_direction(direction: String) -> Direction {
    match direction.to_lowercase().as_str() {
        "n" => Direction:N,
        "ne" => Direction:NE,
        "e" => Direction:E,
        "se" => Direction:SE,
        "s" => Direction:S,
        "sw" => Direction:SW,
        "w" => Direction:W,
        "nw" => Direction:NW,
        _ => throw_r_error("Invalid geohash neighbor direction")
    }
}
```

## Single Neighbor function

Exercise

- Create a function `gh_decode()`
- returns `Option<String>`
- takes 2 args:
  1. `geohash: String`
  2. `direction: String`
- cast the direction to the  `Direction` enum
- pass into the `neighbor()` function
- If there is an error in the result, return `None`
- If successful return `Some(geohash)`
- document and run the function in R to see the result
- test with bad data


## Vectorize the neighbor function

- Modify `gh_decode()` to take `geohash: Strings`
- Returns `Strings`
- Use `.into_iter().map().collect::<String>()` to return a vector of neighbors
- Handle NA values for geohash, return an `Rstr::na()`
- Handle errors return `Rstr::na()`
- Otherwise return `Rstr::from()`
- Collect into Strings


## Decoding a geohash

- a geohash isn't a coordinate, but rather a bounding box
- the `decode()` function decodes into a center point and error in two directions
- The signature is `pub fn decode(hash_str: &str) -> Result<(Coord, f64, f64), GeohashError>`
- the `Coord` is a "generic" struct it has fields x & y and the x & y error
- most natural way to work with this in R would be to create a data frame
- How can we create a data frame in extendr?
- there's a few ways. We're going to go ahead and create one from scratch

## What is there to a data.frame?

> data.frames are just lists masquerading as a rectangle

- named vectors
- structs are record based not column based (this is kinda the whole thing about apache arrow)
- How can we handle this?
- using an iterator isn't the most logical for this. Instead, we can use a for loop
- we can allocate our own vectors and then fill them in a for loop

## Tuples

- The decode function returns a tuple which we haven't yet covered.
- tuples are the heterogenous collection type in Rust
- if you've used tuples in python they're pretty much the same
- elements in the tuple are not named
- generally good for holding only a handful of items, otherwise just define a struct
- we access elements from the tuple via `.0`, `.1`, `.2`
- We can perform destructuring assignment of tuples too which will be handy
-


## Creating vectors

- `Doubles`, `Strings`, and `Logicals` are wrappers around R types
- We can collect into these types or we can create them
- We can allocate empty vectors using associated method `Doubles::new(usize)`
    - But filling these is actually somewhat slow due to the FFI boundary
- Associated method `Doubles::from_values()` to collect values into a vector
  - Store `Vec<Rfloat>`
  - Collect from the vector

## Creating `data.frame`s

- There are two primary ways of creating data.frames in extendr
- I recommend using the `data_frame!()` macro
- this returns an untyped R object: `Robj`
-

### Exercise

- create 4 empty vectors to store:
  - x, y, x_error, y_error
- Create a for loop on the `geohash` note you have to call `.into_iter()` explicitly
-

```rust
fn gh_decode(geohash: Strings) -> Robj {
    let mut x_res = Vec::new();
    let mut y_res = Vec::new();
    let mut x_error = Vec::new();
    let mut y_error = Vec::new();

    for gh in geohash.into_iter() {
        let resi = decode(gh);
        match resi {
            Ok((Coord { x, y }, xe, ye)) => {
                x_res.push(Rfloat::from(x));
                y_res.push(Rfloat::from(y));
                x_error.push(Rfloat::from(xe));
                y_error.push(Rfloat::from(ye));
            }
            Err(_) => {
                x_res.push(Rfloat::na());
                y_res.push(Rfloat::na());
                x_error.push(Rfloat::na());
                y_error.push(Rfloat::na());
            }
        }
    }

    data_frame!(
        x = Doubles::from_values(x_res),
        y = Doubles::from_values(y_res),
        x_error = Doubles::from_values(x_error),
        y_error = Doubles::from_values(y_error)
    )
}
```


## Geohash Neighbors

- We already made a vectorized functioon to find neighbors in a single direction.
- but there is also a function `neighbors()` that returns a struct `Neighbors` that has the geohash for _all_ neighbors
- This would be a nice function to have access to in R
- how should we do this?
- we can take a similar approach we did for `gh_decode()`
- But that's a lot of boiler plate!
- There's another approach to this
- `IntoDataFrameRow` trait which we can derive

## Traits

- in the previous workhop we used the `#[derive()]` attribute to be able to have debug printing
- what is a trait?
- are similar to object oriented programming
- they define behaviors that a type can perform
- they are how we share behavior across rust libraries
- they're common methods that can be implemented for any type you own
- many traits can be "derived" this means you can get them on your type "for free" without doing work

# `IntoDataFrameRow` trait

- the `IntoDataFrameRow` trait is a helper trait to take a `Vec<T>` and turn it into a data frame in R
- it is a one-way trait
- since dataframes are column oriented but structs are row-oriented we can only go one way at the moment
- each field in the struct becomes a column in R
- so it would be nice if we can derive this for the Neighbors struct

### Example

```rust
#[derive(IntoDataFrameRow)]
struct Point {
    x: Rfloat,
    y: Rfloat,
}

#[extendr]
fn make_points(x: Doubles, y: Doubles) -> Robj {
    x.into_iter()
        .zip(y.into_iter())
        .map(|(xi, yi)| Point {
            x: xi.clone(),
            y: yi.clone(),
        })
        .collect::<Vec<_>>()
        .into_dataframe()
        .unwrap()
        .into_robj()
}
```
```r
n <- 10
x <- runif(n, -180, 180)
y <- runif(n, -90, 90)

make_points(x, y)
#>             x          y
#> 1   153.79235  51.577234
#> 2   162.48952 -12.125679
#> 3   145.49589 -51.865901
#> 4  -115.30154 -40.289614
#> 5    66.23683  71.941302
#> 6   163.38766  -9.811993
#> 7   -45.73522 -13.195039
#> 8   -93.75467 -70.093101
#> 9   104.26631 -41.306501
#> 10  -99.78657   8.136069
```

## Deriving IntoDataFrameRow for Neighbors

- lets try deriving it
- lol oops! That sucks! we cant implement traits for types we don't own.
- this is called the "orphan rule"

## Work-around: create your own struct

- one way to handle this is to create your own struct that you can implement traits on
- we can create our own struct `GHNeighbors`
- Since we **own** `GHNeighbors` we can derive `IntoDataFrameRow` for it
- but how do we go from `Neighbors` to `GHNeighbors`?
- we can implement a trait `From`

## `From` trait

- part of the standard library
- this provides a 0-cost abstraction
- lets us go from `T` to `U` without incurring any runtime cost
- use the `impl` keyword to implement a trait
- `impl Trait for OurType`
- The `From` trait requires us to specify a type:
- `impl From<ForeignType> for OurType`

### Example

```rust
impl From<Coord<f64>> for Point {
    fn from(value: Coord<f64>) -> Self {
        Point {
            x: Rfloat::from(value.x),
            y: Rfloat::from(value.y),
        }
    }
}
```

This lets us do something like:

```rust
let coord = Coord::zero();
let p = Point::from(coord);
```



Pro-tip if you write:

```rust
impl From<T> for U {
    // have cursor here and type `cmd + .`
}
```

- This opens the "Quick fix"
- press "implement missing members" which fills the template:

```rust
impl From<T> for U {
    fn from(value: T) -> Self {
        // construct Self / U struct here
        todo!()
    }
}
```

## Default trait

- what happens when we run into an error finding the neighbors?
- we want to be able to return a row of NAs
- rather than constructing the whole thing from struct each time we want to use a full row of NA
- we can actually instead, implement a default value
- note often the default trait can be derived

### Example

```rust
impl Default for Point {
    fn default() -> Self {
        Self {
            x: Rfloat::na(),
            y: Rfloat::na(),
        }
    }
}
```

### Exercise

Implement the `Default` trait for `GHNeighbors`
```rust
impl Default for GHNeighbors {
    fn default() -> Self {
        Self {
            sw: Rstr::na(),
            s: Rstr::na(),
            se: Rstr::na(),
            w: Rstr::na(),
            e: Rstr::na(),
            nw: Rstr::na(),
            n: Rstr::na(),
            ne: Rstr::na(),
        }
    }
}
```

This lets us write `GHNeighbors::default()`

## Put it all together

- lets combine the use of our implementations of `From`, `Default`, and `IntoDataFrameRow` row to write `gh_neighbors()`

### Exercise

```rust
#[extendr]
fn gh_neighbors(geohashes: Strings) -> Robj {
    let all_rows = geohashes
        .into_iter()
        .map(|gh| match neighbors(gh.as_str()) {
            Ok(nbs) => GHNeighbors::from(nbs),
            Err(_) => GHNeighbors::default(),
        })
        .collect::<Vec<_>>();

    all_rows.into_dataframe().unwrap().into_robj()
}
```

## You help me choose what to do next

- Q&A?
- The last function but independently?
- CRAN compatibility?


## All on your own now

- the `decode_bbox()` function

## CRAN Compatibility

- vendoring
- MSRV

## Using GitHub Actions

- R CMD check
- CRAN checks


## Thank you

- Join our Discord
-


<details>
    <summary>View solution</summary>
</details>

 -->



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/josiahparry\.github\.io\/2025-cascadia-rust-for-r-devs\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../intro-to-rust-for-r-devs/options.html" class="pagination-link" aria-label="`Some()` or `None`?">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title"><code>Some()</code> or <code>None</code>?</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../building-rust-based-r-pkgs/ffi.html" class="pagination-link" aria-label="Foreign Function Interfaces (FFI)">
        <span class="nav-page-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Foreign Function Interfaces (FFI)</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions"><ul><li><a href="https://github.com/JosiahParry/2025-cascadia-rust-for-r-devs/edit/main/building-rust-based-r-pkgs/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/JosiahParry/2025-cascadia-rust-for-r-devs/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>